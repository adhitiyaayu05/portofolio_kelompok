<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portofolio KKN Kelompok 1 - Kelurahan Sukalaksana</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow-x: hidden;
        }

        /* Navbar Styles */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-link {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 20px;
        }

        .nav-link:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #333;
            margin: 3px 0;
            transition: 0.3s;
        }

        /* Section Styles */
        .section {
            min-height: 100vh;
            padding: 120px 2rem 80px;
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
        }

        .section.active {
            opacity: 1;
            transform: translateY(0);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease;
        }

        .hero h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease 0.2s both;
        }

        .hero-description {
            max-width: 600px;
            font-size: 1.2rem;
            margin-bottom: 2rem;
            animation: fadeInUp 1s ease 0.4s both;
        }

        /* Logo Section */
        .logo-section {
            background: white;
            text-align: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .logo-placeholder {
            width: 200px;
            height: 200px;
            border: 3px dashed #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(102, 126, 234, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .logo-placeholder:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .logo-info {
            flex: 1;
            min-width: 300px;
        }

        .logo-info h3 {
            color: #667eea;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        /* Team Section */
        .team-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .team-member {
            background: rgba(255, 255, 255, 0.2);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .team-member:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .member-photo {
            width: 120px;
            height: 120px;
            border: 3px dashed white;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        /* Location Section */
        .location-section {
            background: white;
        }

        .location-map {
            width: 100%;
            height: 400px;
            border: 2px solid #667eea;
            border-radius: 15px;
            background: rgba(102, 126, 234, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #667eea;
            margin-top: 2rem;
        }

        /* Programs Section */
        .programs-section {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .programs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .program-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        /* Documentation Section */
        .documentation-section {
            background: white;
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .photo-placeholder {
            aspect-ratio: 4/3;
            border: 2px dashed #667eea;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(102, 126, 234, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .photo-placeholder:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .photo-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .uploaded-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }

        /* Contact Section */
        .contact-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }

        .contact-info {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .contact-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            min-width: 200px;
        }

        /* Storage indicator */
        .storage-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .storage-indicator.saving {
            background: rgba(255, 193, 7, 0.9);
            color: #856404;
        }

        .storage-indicator.saved {
            background: rgba(40, 167, 69, 0.9);
            color: white;
        }

        /* Section Headers */
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-header h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: inherit;
        }

        .section-header p {
            font-size: 1.1rem;
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Data management buttons */
        .data-controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 1000;
        }

        .data-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .data-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .data-btn.export {
            background: rgba(40, 167, 69, 0.9);
            color: white;
        }

        .data-btn.import {
            background: rgba(0, 123, 255, 0.9);
            color: white;
        }

        .data-btn.clear {
            background: rgba(220, 53, 69, 0.9);
            color: white;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.8s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .saving-animation {
            animation: pulse 1s infinite;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-menu {
                position: fixed;
                left: -100%;
                top: 70px;
                flex-direction: column;
                background-color: white;
                width: 100%;
                text-align: center;
                transition: 0.3s;
                box-shadow: 0 10px 27px rgba(0, 0, 0, 0.05);
                padding: 2rem 0;
            }

            .nav-menu.active {
                left: 0;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero h2 {
                font-size: 1.5rem;
            }

            .section {
                padding: 100px 1rem 60px;
            }

            .logo-container {
                flex-direction: column;
                gap: 2rem;
            }

            .contact-info {
                flex-direction: column;
                align-items: center;
            }

            .storage-indicator {
                right: 10px;
                top: 70px;
            }

            .data-controls {
                bottom: 10px;
                left: 10px;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }

            .section-header h2 {
                font-size: 2rem;
            }

            .team-grid {
                grid-template-columns: 1fr;
            }

            .programs-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Storage Indicator -->
    <div id="storageIndicator" class="storage-indicator" style="display: none;">
        💾 Menyimpan...
    </div>

    <!-- Data Controls -->
    <div class="data-controls">
        <button class="data-btn export" onclick="exportData()" title="Ekspor data portofolio">
            📤 Ekspor
        </button>
        <button class="data-btn import" onclick="document.getElementById('importFile').click()" title="Impor data portofolio">
            📥 Impor
        </button>
        <button class="data-btn clear" onclick="clearAllData()" title="Hapus semua data">
            🗑️ Reset
        </button>
        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(this)">
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">KKN Sukalaksana</div>
            <ul class="nav-menu">
                <li><a href="#logo" class="nav-link">Logo</a></li>
                <li><a href="#anggota" class="nav-link">Anggota</a></li>
                <li><a href="#lokasi" class="nav-link">Lokasi</a></li>
                <li><a href="#program-kerja" class="nav-link">Program Kerja</a></li>
                <li><a href="#dokumentasi" class="nav-link">Dokumentasi</a></li>
                <li><a href="#kunjungi-kami" class="nav-link">Kunjungi Kami</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="section hero" id="home">
        <div class="container">
            <h1>Portofolio</h1>
            <h2>Website Kelompok 1 Kelurahan Sukalaksana</h2>
            <p class="hero-description">
                Selamat datang di portofolio KKN Kelompok 1 Kelurahan Sukalaksana. 
                Kami hadir untuk memberikan kontribusi terbaik bagi masyarakat setempat 
                melalui berbagai program kerja yang telah dirancang dengan baik.
            </p>
        </div>
    </section>

    <!-- Logo Section -->
    <section class="section logo-section" id="logo">
        <div class="container">
            <div class="section-header">
                <h2>Logo Kelompok</h2>
                <p>Penjelasan isi makna dan logo tersebut</p>
            </div>
            <div class="logo-container">
                <div class="logo-placeholder" onclick="document.getElementById('logoInput').click()">
                    <input type="file" id="logoInput" accept="image/*" style="display: none;" onchange="displayLogo(this)">
                    <span id="logoText">Klik untuk upload logo</span>
                    <img id="logoImage" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                </div>
                <div class="logo-info">
                    <h3>Makna Logo</h3>
                    <p contenteditable="true" id="logoMeaning" onblur="saveLogoMeaning(this.textContent)">
                        Logo kelompok kami mencerminkan semangat gotong royong dan 
                        dedikasi dalam melayani masyarakat Kelurahan Sukalaksana. 
                        Setiap elemen dalam logo memiliki makna mendalam yang 
                        merepresentasikan nilai-nilai yang kami junjung tinggi.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section class="section team-section" id="anggota">
        <div class="container">
            <div class="section-header">
                <h2>Anggota Kelompok</h2>
                <p>Para anggota kelompok beserta nama dan juga asal gurunannya</p>
            </div>
            <div class="team-grid" id="teamGrid">
                <!-- Team members will be generated by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <button onclick="addTeamMember()" style="background: rgba(255,255,255,0.3); color: white; border: 2px dashed white; padding: 1rem 2rem; border-radius: 25px; cursor: pointer; font-size: 1rem;">
                    + Tambah Anggota
                </button>
            </div>
        </div>
    </section>

    <!-- Location Section -->
    <section class="section location-section" id="lokasi">
        <div class="container">
            <div class="section-header">
                <h2>Lokasi KKN</h2>
                <p>Peta Heatmap Lokasi KKN</p>
            </div>
            <div class="location-map">
                <div style="text-align: center;">
                    <h3 style="margin-bottom: 1rem;">Kelurahan Sukalaksana</h3>
                    <p>Klik untuk menambahkan peta atau informasi lokasi detail</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Programs Section -->
    <section class="section programs-section" id="program-kerja">
        <div class="container">
            <div class="section-header">
                <h2>Program Kerja KKN</h2>
                <p>Dalam program kerja KKN ini, dia menyelam tampilan pesaaj yg menyerupai button, yg nantinya ketika di klik bango, berupa bukti dokumentasi dan juga penjelasan lengkap mengenai program kerjanya.</p>
            </div>
            <div class="programs-grid">
                <div class="program-card">
                    <h3>Program Kerja Harian</h3>
                    <p>Program kerja yang dilaksanakan setiap hari untuk membantu masyarakat dalam kegiatan sehari-hari.</p>
                    <button onclick="showProgramDetails('harian')" style="margin-top: 1rem; background: rgba(255,255,255,0.3); color: white; border: none; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer;">
                        Lihat Detail
                    </button>
                </div>
                <div class="program-card">
                    <h3>Program Kerja Mingguan</h3>
                    <p>Program kerja yang dilaksanakan setiap minggu dengan fokus pada pemberdayaan masyarakat.</p>
                    <button onclick="showProgramDetails('mingguan')" style="margin-top: 1rem; background: rgba(255,255,255,0.3); color: white; border: none; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer;">
                        Lihat Detail
                    </button>
                </div>
                <div class="program-card">
                    <h3>Program Kerja Akhir</h3>
                    <p>Program kerja akhir sebagai puncak dari kegiatan KKN yang telah dilaksanakan.</p>
                    <button onclick="showProgramDetails('akhir')" style="margin-top: 1rem; background: rgba(255,255,255,0.3); color: white; border: none; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer;">
                        Lihat Detail
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Documentation Section -->
    <section class="section documentation-section" id="dokumentasi">
        <div class="container">
            <div class="section-header">
                <h2>Dokumentasi Kebersamaan Anggota</h2>
                <p>Foto-foto yang berupa slideshow</p>
            </div>
            <div class="photo-gallery" id="photoGallery">
                <!-- Photo placeholders will be generated by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <button onclick="addPhotoSlot()" style="background: #667eea; color: white; border: none; padding: 1rem 2rem; border-radius: 25px; cursor: pointer; font-size: 1rem;">
                    + Tambah Slot Foto
                </button>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="section contact-section" id="kunjungi-kami">
        <div class="container">
            <div class="section-header">
                <h2>Kunjungi Kami</h2>
                <p>Informasi kontak dan media sosial kelompok kami</p>
            </div>
            <div class="contact-info">
                <div class="contact-item">
                    <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.3); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center;">
                        📱
                    </div>
                    <h4>Instagram</h4>
                    <p contenteditable="true" id="instagram" onblur="saveContactInfo('instagram', this.textContent)">@kkn_sukalaksana</p>
                </div>
                <div class="contact-item">
                    <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.3); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center;">
                        📧
                    </div>
                    <h4>Email</h4>
                    <p contenteditable="true" id="email" onblur="saveContactInfo('email', this.textContent)">kkn.sukalaksana@email.com</p>
                </div>
                <div class="contact-item">
                    <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.3); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center;">
                        📍
                    </div>
                    <h4>Alamat</h4>
                    <p contenteditable="true" id="address" onblur="saveContactInfo('address', this.textContent)">Kelurahan Sukalaksana</p>
                </div>
            </div>
            <div style="margin-top: 3rem; text-align: center;">
                <p>Proyek ini dibuat oleh Kelompok 1 Kelurahan Sukalaksana</p>
                <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                    💾 Data otomatis tersimpan di browser Anda
                </p>
            </div>
        </div>
    </section>

    <script>
        // Global variables untuk penyimpanan data
        let portfolioData = {
            logo: null,
            logoMeaning: '',
            teamMembers: [],
            photos: [],
            contactInfo: {
                instagram: '@kkn_sukalaksana',
                email: 'kkn.sukalaksana@email.com',
                address: 'Kelurahan Sukalaksana'
            },
            programs: {}
        };

        // Storage functions
        function saveToStorage() {
            try {
                showStorageIndicator('saving');
                localStorage.setItem('kknPortfolioData', JSON.stringify(portfolioData));
                showStorageIndicator('saved');
                console.log('✅ Data berhasil disimpan ke localStorage');
            } catch (error) {
                console.error('❌ Error menyimpan data:', error);
                alert('Gagal menyimpan data. Storage mungkin penuh.');
            }
        }

        function loadFromStorage() {
            try {
                const savedData = localStorage.getItem('kknPortfolioData');
                if (savedData) {
                    portfolioData = JSON.parse(savedData);
                    console.log('✅ Data berhasil dimuat dari localStorage');
                    return true;
                }
            } catch (error) {
                console.error('❌ Error memuat data:', error);
            }
            return false;
        }

        function showStorageIndicator(type) {
            const indicator = document.getElementById('storageIndicator');
            indicator.style.display = 'block';
            
            if (type === 'saving') {
                indicator.className = 'storage-indicator saving';
                indicator.textContent = '💾 Menyimpan...';
            } else if (type === 'saved') {
                indicator.className = 'storage-indicator saved';
                indicator.textContent = '✅ Tersimpan';
                setTimeout(() => {
                    indicator.style.display = 'none';
                }, 2000);
            }
        }

        // Data management functions
        function exportData() {
            try {
                const dataStr = JSON.stringify(portfolioData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `portofolio-kkn-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                
                URL.revokeObjectURL(url);
                alert('✅ Data portofolio berhasil diekspor!');
            } catch (error) {
                console.error('❌ Error ekspor data:', error);
                alert('❌ Gagal mengekspor data');
            }
        }

        function importData(input) {
            const file = input.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // Validasi struktur data
                    if (importedData.teamMembers && Array.isArray(importedData.teamMembers)) {
                        if (confirm('Apakah Anda yakin ingin mengimpor data ini? Data saat ini akan diganti.')) {
                            portfolioData = importedData;
                            saveToStorage();
                            location.reload(); // Reload untuk menampilkan data baru
                        }
                    } else {
                        alert('❌ File tidak valid atau format salah');
                    }
                } catch (error) {
                    console.error('❌ Error import data:', error);
                    alert('❌ Gagal mengimpor data. File mungkin rusak.');
                }
            };
            reader.readAsText(file);
            input.value = ''; // Reset input
        }

        function clearAllData() {
            if (confirm('⚠️ Apakah Anda yakin ingin menghapus SEMUA data portofolio? Tindakan ini tidak dapat dibatalkan!')) {
                localStorage.removeItem('kknPortfolioData');
                alert('✅ Semua data telah dihapus');
                location.reload();
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from storage first
            loadFromStorage();
            
            // Initialize components with saved data
            initializeTeamMembers();
            initializePhotoGallery();
            initializeLogo();
            initializeContactInfo();
            initializeScrollAnimation();
            initializeNavigation();
            
            console.log('🎉 Portofolio KKN dengan penyimpanan permanen berhasil dimuat!');
        });

        // Logo functionality with persistence
        function initializeLogo() {
            if (portfolioData.logo) {
                const logoImage = document.getElementById('logoImage');
                const logoText = document.getElementById('logoText');
                logoImage.src = portfolioData.logo;
                logoImage.style.display = 'block';
                logoText.style.display = 'none';
            }
            
            if (portfolioData.logoMeaning) {
                document.getElementById('logoMeaning').textContent = portfolioData.logoMeaning;
            }
        }

        function displayLogo(input) {
            const file = input.files[0];
            if (file) {
                // Check file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('❌ Ukuran file terlalu besar. Maksimal 5MB.');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const logoImage = document.getElementById('logoImage');
                    const logoText = document.getElementById('logoText');
                    
                    logoImage.src = e.target.result;
                    logoImage.style.display = 'block';
                    logoText.style.display = 'none';
                    
                    // Save to storage
                    portfolioData.logo = e.target.result;
                    saveToStorage();
                };
                reader.readAsDataURL(file);
            }
        }

        function saveLogoMeaning(meaning) {
            portfolioData.logoMeaning = meaning;
            saveToStorage();
        }

        // Contact info with persistence
        function initializeContactInfo() {
            if (portfolioData.contactInfo) {
                document.getElementById('instagram').textContent = portfolioData.contactInfo.instagram;
                document.getElementById('email').textContent = portfolioData.contactInfo.email;
                document.getElementById('address').textContent = portfolioData.contactInfo.address;
            }
        }

        function saveContactInfo(field, value) {
            portfolioData.contactInfo[field] = value;
            saveToStorage();
        }

        // Navigation functionality
        function initializeNavigation() {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            const navLinks = document.querySelectorAll('.nav-link');

            hamburger.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                this.classList.toggle('active');
            });

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    
                    if (targetSection) {
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            });
        }

        // Scroll animation
        function initializeScrollAnimation() {
            const sections = document.querySelectorAll('.section');
            
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });

            // Activate first section immediately
            if (sections.length > 0) {
                sections[0].classList.add('active');
            }
        }

        // Team members with persistence
        function initializeTeamMembers() {
            // Load from storage or create default members
            if (portfolioData.teamMembers.length === 0) {
                for (let i = 0; i < 7; i++) {
                    portfolioData.teamMembers.push({
                        name: `Anggota ${i + 1}`,
                        university: 'Nama Universitas',
                        photo: null
                    });
                }
                saveToStorage();
            }
            renderTeamMembers();
        }

        function renderTeamMembers() {
            const teamGrid = document.getElementById('teamGrid');
            teamGrid.innerHTML = '';

            portfolioData.teamMembers.forEach((member, index) => {
                const memberDiv = document.createElement('div');
                memberDiv.className = 'team-member';
                memberDiv.innerHTML = `
                    <div class="member-photo" onclick="uploadMemberPhoto(${index})">
                        <input type="file" id="memberPhoto${index}" accept="image/*" style="display: none;" onchange="displayMemberPhoto(${index}, this)">
                        ${member.photo ? 
                            `<img src="${member.photo}" alt="${member.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">` : 
                            'Foto'
                        }
                    </div>
                    <h4 contenteditable="true" onblur="updateMemberName(${index}, this.textContent)" onclick="this.focus()">${member.name}</h4>
                    <p contenteditable="true" onblur="updateMemberUniversity(${index}, this.textContent)" onclick="this.focus()">${member.university}</p>
                    <button onclick="removeMember(${index})" style="background: rgba(255,0,0,0.7); color: white; border: none; padding: 0.3rem 0.8rem; border-radius: 15px; margin-top: 0.5rem; cursor: pointer; font-size: 0.8rem;">
                        🗑️ Hapus
                    </button>
                `;
                teamGrid.appendChild(memberDiv);
            });
        }

        function addTeamMember() {
            portfolioData.teamMembers.push({
                name: `Anggota ${portfolioData.teamMembers.length + 1}`,
                university: 'Nama Universitas',
                photo: null
            });
            saveToStorage();
            renderTeamMembers();
        }

        function removeMember(index) {
            if (confirm('Apakah Anda yakin ingin menghapus anggota ini?')) {
                portfolioData.teamMembers.splice(index, 1);
                saveToStorage();
                renderTeamMembers();
            }
        }

        function uploadMemberPhoto(index) {
            document.getElementById(`memberPhoto${index}`).click();
        }

        function displayMemberPhoto(index, input) {
            const file = input.files[0];
            if (file) {
                // Check file size (max 3MB per photo)
                if (file.size > 3 * 1024 * 1024) {
                    alert('❌ Ukuran foto terlalu besar. Maksimal 3MB per foto.');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    portfolioData.teamMembers[index].photo = e.target.result;
                    saveToStorage();
                    renderTeamMembers();
                };
                reader.readAsDataURL(file);
            }
        }

        function updateMemberName(index, name) {
            portfolioData.teamMembers[index].name = name;
            saveToStorage();
        }

        function updateMemberUniversity(index, university) {
            portfolioData.teamMembers[index].university = university;
            saveToStorage();
        }

        // Photo gallery with persistence
        function initializePhotoGallery() {
            // Load from storage or create default slots
            if (portfolioData.photos.length === 0) {
                for (let i = 0; i < 6; i++) {
                    portfolioData.photos.push(null);
                }
                saveToStorage();
            }
            renderPhotoGallery();
        }

        function renderPhotoGallery() {
            const gallery = document.getElementById('photoGallery');
            gallery.innerHTML = '';

            portfolioData.photos.forEach((photo, index) => {
                const photoDiv = document.createElement('div');
                photoDiv.className = 'photo-placeholder';
                
                if (photo) {
                    photoDiv.innerHTML = `
                        <img src="${photo}" alt="Dokumentasi ${index + 1}" class="uploaded-image">
                        <div style="position: absolute; top: 5px; right: 5px; background: rgba(255,0,0,0.8); border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white;" onclick="removePhoto(${index})">
                            ❌
                        </div>
                        <div style="position: absolute; bottom: 5px; left: 5px; background: rgba(0,0,0,0.7); color: white; padding: 0.2rem 0.5rem; border-radius: 10px; font-size: 0.8rem;">
                            Foto ${index + 1}
                        </div>
                    `;
                } else {
                    photoDiv.innerHTML = `
                        <input type="file" class="photo-input" accept="image/*" onchange="displayPhoto(${index}, this)">
                        <span>📷 Klik untuk upload foto</span>
                    `;
                }
                
                gallery.appendChild(photoDiv);
            });
        }

        function addPhotoSlot() {
            portfolioData.photos.push(null);
            saveToStorage();
            renderPhotoGallery();
        }

        function displayPhoto(index, input) {
            const file = input.files[0];
            if (file) {
                // Check file size (max 3MB per photo)
                if (file.size > 3 * 1024 * 1024) {
                    alert('❌ Ukuran foto terlalu besar. Maksimal 3MB per foto.');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    portfolioData.photos[index] = e.target.result;
                    saveToStorage();
                    renderPhotoGallery();
                };
                reader.readAsDataURL(file);
            }
        }

        function removePhoto(index) {
            if (confirm('Apakah Anda yakin ingin menghapus foto ini?')) {
                portfolioData.photos[index] = null;
                saveToStorage();
                renderPhotoGallery();
            }
        }

        // Program details functionality
        function showProgramDetails(programType) {
            let title, content;
            
            switch(programType) {
                case 'harian':
                    title = 'Program Kerja Harian';
                    content = `
                        <h4>Kegiatan Harian:</h4>
                        <ul style="text-align: left; margin: 1rem 0;">
                            <li>Membantu kegiatan administratif kelurahan</li>
                            <li>Pendampingan kegiatan masyarakat</li>
                            <li>Sosialisasi program kesehatan</li>
                            <li>Bantuan pendidikan untuk anak-anak</li>
                        </ul>
                        <p>Program ini dilaksanakan setiap hari dengan tujuan memberikan bantuan langsung kepada masyarakat dalam kegiatan sehari-hari.</p>
                    `;
                    break;
                case 'mingguan':
                    title = 'Program Kerja Mingguan';
                    content = `
                        <h4>Kegiatan Mingguan:</h4>
                        <ul style="text-align: left; margin: 1rem 0;">
                            <li>Pembersihan lingkungan bersama masyarakat</li>
                            <li>Pelatihan keterampilan untuk ibu-ibu PKK</li>
                            <li>Penyuluhan kesehatan dan gizi</li>
                            <li>Kegiatan olahraga dan rekreasi</li>
                        </ul>
                        <p>Program mingguan fokus pada pemberdayaan masyarakat dan peningkatan kualitas hidup.</p>
                    `;
                    break;
                case 'akhir':
                    title = 'Program Kerja Akhir';
                    content = `
                        <h4>Kegiatan Akhir:</h4>
                        <ul style="text-align: left; margin: 1rem 0;">
                            <li>Festival budaya dan seni daerah</li>
                            <li>Pameran hasil karya masyarakat</li>
                            <li>Serah terima bantuan program</li>
                            <li>Evaluasi dan pelaporan kegiatan</li>
                        </ul>
                        <p>Program kerja akhir merupakan puncak dari seluruh kegiatan KKN yang telah dilaksanakan.</p>
                    `;
                    break;
            }

            // Create modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="background: white; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; border-radius: 15px; padding: 2rem; position: relative;">
                    <button onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 1rem; right: 1rem; background: #ff4757; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer;">✕</button>
                    <h3 style="color: #667eea; margin-bottom: 1rem;">${title}</h3>
                    <div style="color: #333; line-height: 1.6;">${content}</div>
                    <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #667eea;">
                        <h5>Dokumentasi:</h5>
                        <p style="margin-top: 0.5rem;">Klik tombol di bawah untuk menambahkan foto dokumentasi program ini.</p>
                        <button onclick="addProgramDocumentation('${programType}')" style="background: #667eea; color: white; border: none; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer; margin-top: 1rem;">
                            📷 Tambah Dokumentasi
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function addProgramDocumentation(programType) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.multiple = true;
            input.onchange = function() {
                if (this.files.length > 0) {
                    // Save program documentation to photos array
                    Array.from(this.files).forEach(file => {
                        if (file.size <= 3 * 1024 * 1024) { // 3MB limit
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                portfolioData.photos.push(e.target.result);
                                saveToStorage();
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                    
                    alert(`✅ ${this.files.length} foto dokumentasi untuk ${programType} telah ditambahkan ke galeri!`);
                    setTimeout(() => {
                        renderPhotoGallery();
                    }, 1000);
                }
            };
            input.click();
        }

        // Utility functions
        function compressImage(file, maxWidth = 800, quality = 0.8) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    const ratio = Math.min(maxWidth / img.width, maxWidth / img.height);
                    canvas.width = img.width * ratio;
                    canvas.height = img.height * ratio;
                    
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    canvas.toBlob(resolve, 'image/jpeg', quality);
                };
                
                img.src = URL.createObjectURL(file);
            });
        }

        // Storage monitoring
        function checkStorageUsage() {
            try {
                const data = localStorage.getItem('kknPortfolioData');
                if (data) {
                    const sizeInBytes = new Blob([data]).size;
                    const sizeInMB = (sizeInBytes / (1024 * 1024)).toFixed(2);
                    console.log(`📊 Storage usage: ${sizeInMB} MB`);
                    
                    if (sizeInMB > 4) {
                        console.warn('⚠️ Storage usage tinggi, pertimbangkan untuk mengompres gambar');
                    }
                }
            } catch (error) {
                console.error('Error checking storage:', error);
            }
        }

        // Auto-save indicator
        let saveTimeout;
        function debouncedSave() {
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(saveToStorage, 1000); // Save after 1 second of inactivity
        }

        // Performance optimization
        function optimizeImages() {
            // Compress images if storage is getting full
            const data = localStorage.getItem('kknPortfolioData');
            if (data && new Blob([data]).size > 4 * 1024 * 1024) { // 4MB
                if (confirm('Storage hampir penuh. Kompres gambar untuk menghemat ruang?')) {
                    // Implement image compression logic here
                    alert('Fitur kompresi gambar akan ditambahkan di update selanjutnya');
                }
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 's':
                        e.preventDefault();
                        saveToStorage();
                        break;
                    case 'e':
                        e.preventDefault();
                        exportData();
                        break;
                    case 'h':
                        e.preventDefault();
                        document.getElementById('home').scrollIntoView({ behavior: 'smooth' });
                        break;
                }
            }
        });

        // Scroll to top functionality
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                if (!document.getElementById('scrollTopBtn')) {
                    const scrollBtn = document.createElement('button');
                    scrollBtn.id = 'scrollTopBtn';
                    scrollBtn.innerHTML = '↑';
                    scrollBtn.style.cssText = `
                        position: fixed;
                        bottom: 120px;
                        right: 20px;
                        background: #667eea;
                        color: white;
                        border: none;
                        border-radius: 50%;
                        width: 50px;
                        height: 50px;
                        font-size: 1.5rem;
                        cursor: pointer;
                        z-index: 1000;
                        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
                        transition: all 0.3s ease;
                    `;
                    scrollBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
                    scrollBtn.onmouseover = () => scrollBtn.style.transform = 'scale(1.1)';
                    scrollBtn.onmouseout = () => scrollBtn.style.transform = 'scale(1)';
                    document.body.appendChild(scrollBtn);
                }
            } else {
                const scrollBtn = document.getElementById('scrollTopBtn');
                if (scrollBtn) {
                    scrollBtn.remove();
                }
            }
        });

        // Monitor storage usage periodically
        setInterval(checkStorageUsage, 30000); // Check every 30 seconds

        // Add success notifications
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#28a745' : '#dc3545'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                z-index: 2000;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add CSS animations
        const additionalStyles = document.createElement('style');
        additionalStyles.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @keyframes slideInRight {
                from { 
                    opacity: 0; 
                    transform: translateX(100px); 
                }
                to { 
                    opacity: 1; 
                    transform: translateX(0); 
                }
            }
            
            @keyframes slideOutRight {
                from { 
                    opacity: 1; 
                    transform: translateX(0); 
                }
                to { 
                    opacity: 0; 
                    transform: translateX(100px); 
                }
            }
            
            .hamburger.active span:nth-child(1) {
                transform: rotate(-45deg) translate(-5px, 6px);
            }
            
            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }
            
            .hamburger.active span:nth-child(3) {
                transform: rotate(45deg) translate(-5px, -6px);
            }

            [contenteditable]:focus {
                outline: 2px solid #667eea;
                background: rgba(102, 126, 234, 0.1);
                border-radius: 5px;
                padding: 0.2rem;
            }

            .data-btn:active {
                transform: translateY(0) scale(0.95);
            }

            .photo-placeholder:hover {
                border-color: #5a6fd8;
            }

            .team-member:hover .member-photo {
                transform: scale(1.1);
            }

            @media (max-width: 768px) {
                .data-controls {
                    flex-direction: row;
                    bottom: 80px;
                    left: 50%;
                    transform: translateX(-50%);
                    gap: 0.3rem;
                }
                
                .data-btn {
                    padding: 0.4rem 0.8rem;
                    font-size: 0.7rem;
                }
            }
        `;
        document.head.appendChild(additionalStyles);

        console.log('🎉 Portofolio KKN dengan penyimpanan permanen siap digunakan!');
        console.log('💡 Tips:');
        console.log('  - Ctrl+S: Manual save');
        console.log('  - Ctrl+E: Export data');
        console.log('  - Ctrl+H: Scroll to top');
        console.log('  - Data tersimpan otomatis di browser');
    </script>
</body>
</html>